<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>NOVA</title>
    <link rel="stylesheet" href="/css/style.css" />
    <style>
    .product-detail {
        max-width: 1200px;
        margin: 50px auto;
        padding: 30px;
        border: 1px solid #ddd;
        border-radius: 10px;
        display: flex;
        flex-wrap: wrap;
        gap: 40px;
        justify-content: center;
      }

      .product-detail img {
        width: 400px;
        max-width: 100%;
        border-radius: 8px;
        object-fit: cover;
      }

  .product-info {
    flex: 1;
    min-width: 300px;
    max-width: 600px;
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

    .product-info h1 {
      font-size: 28px;
      margin-bottom: 10px;
    }

      .product-info .price {
        font-size: 22px;
        color: black;
        font-weight: bold;
      }

      .product-info .desc {
        font-size: 16px;
        color: #555;
        line-height: 1.5;
      }

  .option-select label {
    font-weight: bold;
    display: block;
    margin: 10px 0 5px;
  }

  .option-select select {
    padding: 8px;
    width: 100%;
    border: 1px solid #ccc;
    border-radius: 5px;
  }

    .total,
    .cart-btn {
      margin-bottom: 10px;
      display: block;
    }

    .option-select select {
      padding: 5px;
      margin-left: 10px;
    }

  .quantity-control {
    display: flex;
    align-items: center;
    gap: 10px;
    margin: 10px 0;
  }

  .quantity-control button {
    width: 30px;
    height: 30px;
    font-size: 18px;
    background-color: #eee;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }

  .total {
    font-weight: bold;
    font-size: 18px;
    color: #333;
    margin: 10px 0;
  }

  .cart-btn {
    background-color: black;
    color: #fff;
    border: none;
    padding: 12px 20px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
  }

  .tabs {
      position: sticky;
      top: 0;
      z-index: 999;
      background: #fff;
      display: flex;
      justify-content: center;
      border-bottom: 1px solid #ddd;
      padding: 10px 0;
      margin-bottom: 20px;
    }

    .tabs a {
      padding: 10px 20px;
      text-decoration: none;
      color: #333;
      font-weight: bold;
    }

    .tabs a:hover {
      color: #d32f2f;
    }

    /* ê° ì„¹ì…˜ */
    .product-section {
      padding: 40px 10%;
      scroll-margin-top: 70px; /* íƒ­ ë†’ì´ë§Œí¼ */
      border-bottom: 1px solid #eee;
    }

    .product-section:last-of-type {
      border-bottom: none;
    }

    @media (max-width: 768px) {
    .product-detail {
      flex-direction: column;
      align-items: center;
    }

    .product-info {
      max-width: 100%;
    }


/* í›„ê¸° ë¦¬ìŠ¤íŠ¸ wrapper ì •ë ¬ */

  #review {
    font-family: 'Pretendard', sans-serif;
    max-width: 800px;
    margin: 50px auto;
    padding: 30px;
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
  }

  #review h2 {
    font-size: 28px;
    font-weight: bold;
    margin-bottom: 20px;
    border-left: 4px solid #4f46e5;
    padding-left: 10px;
    color: #333;
  }

  .filter-group {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    margin-bottom: 30px;
  }

  .filter-group > div {
    display: flex;
    flex-direction: column;
    font-size: 14px;
  }

  .filter-group input,
  .filter-group select {
    padding: 6px 10px;
    border: 1px solid #ccc;
    border-radius: 8px;
    min-width: 80px;
    font-size: 14px;
  }

  #filter-btn {
    align-self: flex-end;
    padding: 8px 16px;
    background-color: #4f46e5;
    color: white;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    margin-top: 20px;
  }

  #filter-btn:hover {
    background-color: #3730a3;
  }


/* í›„ê¸° ì¹´ë“œ ì „ì²´ */
/* í›„ê¸° ë¦¬ìŠ¤íŠ¸ wrapper */
#review-list {
  display: flex;
  flex-direction: column;
  gap: 0;
}

/* í›„ê¸° ì¹´ë“œ ì „ì²´ */
.review-card {
  background: #fff;
  border-bottom: 1px solid #e5e5e5;
  padding: 20px 0;
  text-align: left;
}

.review-card:last-child {
  border-bottom: none;
}

/* í›„ê¸° í—¤ë” (ë‹‰ë„¤ì„ + ë‚ ì§œ + íƒœê·¸ë“¤) */
.review-header {
  display: flex;
  align-items: center;
  gap: 15px;
  font-size: 14px;
  color: #666;
  margin-bottom: 8px;
}

.review-header .nickname {
  font-weight: 600;
  font-size: 14px;
  color: #000;
}

.review-header .info {
  color: #999;
  font-size: 13px;
}

/* í›„ê¸° ë³¸ë¬¸ */
.review-content {
  font-size: 14px;
  line-height: 1.6;
  color: #333;
  white-space: pre-line;
  margin-left: 0;
}




  </style>
</head>
<body>

<!-- í—¤ë” -->
<div th:replace="~{common/header :: header}"></div>

<!-- ìƒí’ˆ ìƒì„¸ ì¹´ë“œ -->
<div class="product-detail">
    <img id="product-image" src="" alt="ìƒí’ˆ ì´ë¯¸ì§€" />
    <div class="product-info">
        <h1 id="product-name">ìƒí’ˆëª…</h1>
        <div class="price" id="product-price">ê°€ê²©</div>
        <div class="desc">
            <p>ì´ ìƒí’ˆì€ ìŠ¤íƒ€ì¼ë¦¬ì‹œí•˜ê³  í¸ì•ˆí•œ ì°©ìš©ê°ì„ ì œê³µí•©ë‹ˆë‹¤. ë‹¤ì–‘í•œ ì½”ë””ì— ì˜ ì–´ìš¸ë ¤ ë°ì¼ë¦¬ ì•„ì´í…œìœ¼ë¡œ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.</p>
        </div>
        <div class="option-select">
            <label>ìƒ‰ìƒ:
                <select id="color">
                    <option value="">[í•„ìˆ˜] ì„ íƒ</option>
                    <option value="ë¸”ë™">ë¸”ë™</option>
                    <option value="í™”ì´íŠ¸">í™”ì´íŠ¸</option>
                </select>
            </label>
        </div>
        <div class="option-select">
            <label>ì‚¬ì´ì¦ˆ:
                <select id="size">
                    <option value="">[í•„ìˆ˜] ì„ íƒ</option>
                    <option value="M">M</option>
                    <option value="L">L</option>
                </select>
            </label>
        </div>

        <div class="quantity-control">
            <button id="minus">-</button>
            <span id="quantity">1</span>
            <button id="plus">+</button>
        </div>

        <div class="total">TOTAL: <span id="totalPrice">0ì›</span></div>
        <button id="addToCart" class="cart-btn">ì¥ë°”êµ¬ë‹ˆì— ë‹´ê¸°</button>
    </div>
</div>

<!-- íƒ­ -->
<div class="tabs">
    <a href="#info">ìƒí’ˆ ì •ë³´</a>
    <a href="#review">ìƒí’ˆ í›„ê¸°</a>
    <a href="#qna">ìƒí’ˆ ë¬¸ì˜</a>
    <a href="#delivery">ë°°ì†¡/êµí™˜/í™˜ë¶ˆ</a>
</div>

<!-- ì½˜í…ì¸  -->
<div id="info" class="product-section">
    <h2>ìƒí’ˆ ì •ë³´</h2>
    <p>ì—¬ê¸°ì— ìƒì„¸ ìƒí’ˆ ì •ë³´ê°€ ë“¤ì–´ê°‘ë‹ˆë‹¤.</p>
</div>
<div id="review" class="product-section">
    <h2>ìƒí’ˆ í›„ê¸°</h2>

    <!-- í•„í„° -->
    <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px;">
        <div>
            <label>SIZE</label>
            <select id="filter-size">
                <option value="">ì „ì²´</option>
                <option value="S">S</option>
                <option value="M">M</option>
                <option value="L">L</option>
                <option value="XL">XL</option>
            </select>
        </div>

        <div>
            <label>ì„±ë³„</label>
            <select id="filter-gender">
                <option value="">ì „ì²´</option>
                <option value="ì—¬ì„±">ì—¬ì„±</option>
                <option value="ë‚¨ì„±">ë‚¨ì„±</option>
            </select>
        </div>

        <div>
            <label>í‚¤</label>
            <input type="number" id="filter-height-min" placeholder="ì˜ˆ: 100" style="width: 60px;" />
            ~
            <input type="number" id="filter-height-max" placeholder="ì˜ˆ: 200" style="width: 60px;" />
        </div>

        <div>
            <label>ëª¸ë¬´ê²Œ</label>
            <input type="number" id="filter-weight-min" placeholder="ì˜ˆ: 40" style="width: 60px;" />
            ~
            <input type="number" id="filter-weight-max" placeholder="ì˜ˆ: 55" style="width: 60px;" />
        </div>

        <button id="filter-btn" style="padding: 5px 10px;">ì¡°íšŒ ğŸ”</button>
    </div>

    <!-- í›„ê¸° ë¦¬ìŠ¤íŠ¸ -->
    <div id="review-list">
        <!-- í›„ê¸°ë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë¼ìš” -->
    </div>
</div>
<div id="qna" class="product-section">
    <h2>ìƒí’ˆ ë¬¸ì˜</h2>
    <p>ë¬¸ì˜ ë‚´ìš©ì„ ì—¬ê¸°ì— ì‘ì„±í•˜ê±°ë‚˜ í‘œì‹œí•©ë‹ˆë‹¤.</p>
</div>
<div id="delivery" class="product-section">
    <h2>ë°°ì†¡/êµí™˜/í™˜ë¶ˆ ì•ˆë‚´</h2>
    <h4>DELIVERY</h4>
    <p>
        - ê²°ì œì¼ ì´í›„ 2~3ì¼ ì´ë‚´ ë°œì†¡í•©ë‹ˆë‹¤. (ì£¼ë§, ê³µíœ´ì¼ ì œì™¸) <br>
        - ì¼ë¶€ ë„ì„œ/ì‚°ê°„ ì§€ì—­ì—ëŠ” ë°°ì†¡ë¹„ ì¶”ê°€ ë° ë°°ì†¡ ì§€ì—°ì´ ë°œìƒ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    </p>
    <h4>EXCHANGE & REFUND</h4>
    <p>
        - êµ¬ë§¤ìì˜ ë¶€ì£¼ì˜ë¡œ ì¸í•œ ìƒí’ˆ íŒŒì†ì€ êµí™˜ ë° í™˜ë¶ˆ ë¶ˆê°€í•©ë‹ˆë‹¤.<br>
        - ë¼ë²¨ ì œê±° ì‹œ êµí™˜ ë° í™˜ë¶ˆ ë¶ˆê°€í•©ë‹ˆë‹¤. <br>
        - ë‹¨ìˆœ ë³€ì‹¬ìœ¼ë¡œ ì¸í•œ êµí™˜ ë° í™˜ë¶ˆì˜ ê²½ìš°, êµ¬ë§¤ìë‹˜ê»˜ì„œ ë°°ì†¡ë¹„ë¥¼ ë¶€ë‹´í•˜ì…”ì•¼í•©ë‹ˆë‹¤.<br>
        - ìƒí’ˆ ìˆ˜ë ¹ì¼ë¡œë¶€í„° 7ì¼ ì´ë‚´ë¡œë§Œ êµí™˜ ë° í™˜ë¶ˆ ê°€ëŠ¥í•©ë‹ˆë‹¤. <br>
        - ìƒí’ˆ ë¶ˆëŸ‰ ë° ì˜¤ë°°ì†¡ìœ¼ë¡œ ì¸í•œ êµí™˜ ë° í™˜ë¶ˆì€ ë°°ì†¡ë¹„ëŠ” ë³¸ì‚¬ì—ì„œ ë¶€ë‹´í•©ë‹ˆë‹¤. <br>
        - ë³¸ì‚¬ì˜ ìƒí’ˆì´ ì•„ë‹Œ ê²½ìš° êµí™˜ ë° í™˜ë¶ˆ ë¶ˆê°€í•©ë‹ˆë‹¤.
    </p>
</div>

<!-- í‘¸í„° -->
<div th:replace="~{common/footer :: footer}"></div>

<!-- JS -->
<script>
  const params = new URLSearchParams(window.location.search);
  const name = decodeURIComponent(params.get('name'));
  const priceStr = decodeURIComponent(params.get('price'));
  const price = parseInt(priceStr.replace(/[^0-9]/g, ""));
  const image = decodeURIComponent(params.get('image'));

  let quantity = 1;

  if (name && priceStr && image) {
    document.getElementById("product-name").innerText = name;
    document.getElementById("product-price").innerText = priceStr;
    document.getElementById("product-image").src = image;
    updateTotal();
  } else {
    document.querySelector(".product-detail").innerHTML = "<p>ìƒí’ˆ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>";
  }

  function updateTotal() {
    document.getElementById('quantity').innerText = quantity;
    document.getElementById('totalPrice').innerText = (quantity * price).toLocaleString() + 'ì›';
  }

  document.getElementById('plus').addEventListener('click', () => {
    quantity++;
    updateTotal();
  });

  document.getElementById('minus').addEventListener('click', () => {
    if (quantity > 1) quantity--;
    updateTotal();
  });

  document.getElementById('addToCart').addEventListener('click', () => {
    const selectedColor = document.getElementById('color').value;
    const selectedSize = document.getElementById('size').value;

    if (!selectedColor || !selectedSize) {
      alert("ìƒ‰ìƒê³¼ ì‚¬ì´ì¦ˆë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!");
      return;
    }

    const cartItem = {
      name,
      image,
      price,
      quantity,
      color: selectedColor,
      size: selectedSize,
      totalPrice: quantity * price
    };

    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    cart.push(cartItem);
    localStorage.setItem('cart', JSON.stringify(cart));

    alert("ì¥ë°”êµ¬ë‹ˆì— ë‹´ê²¼ì–´ìš”! ğŸ›’");
  });

  document.querySelectorAll('.tabs a').forEach(link => {
    link.addEventListener('click', function (e) {
      e.preventDefault();
      const targetId = this.getAttribute('href');
      document.querySelector(targetId).scrollIntoView({ behavior: 'smooth' });
    });
  });



  const reviews = [
    { name: "ë‹‰ë„¤ì„1", date: "2025.05.02", size: "M", gender: "ì—¬ì„±", height: 160, weight: 50, content: "ì˜· í•ì´ ë§ˆìŒì— ë“¤ì–´ìš”! Xì ì–´ê¹¨ ì˜ ì‚´ë ¤ì¤Œ ì•„ì£¼ êµ¿!" },
    { name: "ë‹‰ë„¤ì„2", date: "2025.05.02", size: "S", gender: "ì—¬ì„±", height: 155, weight: 45, content: "ìƒê°ë³´ë‹¤ ë”± ë§ì•„ìš”. ë§Œì¡±!" },
    { name: "ë‹‰ë„¤ì„3", date: "2025.05.02", size: "L", gender: "ë‚¨ì„±", height: 178, weight: 70, content: "ì‚¬ì´ì¦ˆ ë„‰ë„‰í•´ì„œ ì¢‹ì•„ìš”." },
    { name: "ë‹‰ë„¤ì„4", date: "2025.05.02", size: "M", gender: "ì—¬ì„±", height: 160, weight: 50, content: "í•ì´ ë”± ì¢‹ê³  ì†Œì¬ë„ ë¶€ë“œëŸ¬ì›Œìš”." }
  ];

  function renderReviews(filteredReviews) {
  const list = document.getElementById("review-list");
  list.innerHTML = "";

  if (filteredReviews.length === 0) {
    list.innerHTML = "<p>ì¡°ê±´ì— ë§ëŠ” í›„ê¸°ê°€ ì—†ì–´ìš” ğŸ˜¢</p>";
    return;
  }

  filteredReviews.forEach(r => {
    const div = document.createElement("div");
    div.className = "review-card";
    div.innerHTML = `
      <div class="review-header">
        <span class="nickname">${r.name}</span>
        <span class="tag">${r.date}</span>
        <span class="tag">ì‚¬ì´ì¦ˆ: ${r.size}</span>
        <span class="tag">${r.gender}</span>
        <span class="tag">${r.height}cm / ${r.weight}kg</span>
      </div>
      <div class="review-content">${r.content}</div>
    `;
    list.appendChild(div);
  });
}

  function filterReviews() {
    const size = document.getElementById("filter-size").value;
    const gender = document.getElementById("filter-gender").value;
    const heightMin = parseInt(document.getElementById("filter-height-min").value) || 0;
    const heightMax = parseInt(document.getElementById("filter-height-max").value) || 300;
    const weightMin = parseInt(document.getElementById("filter-weight-min").value) || 0;
    const weightMax = parseInt(document.getElementById("filter-weight-max").value) || 300;

    const filtered = reviews.filter(r =>
      (size === "" || r.size === size) &&
      (gender === "" || r.gender === gender) &&
      r.height >= heightMin && r.height <= heightMax &&
      r.weight >= weightMin && r.weight <= weightMax
    );

    renderReviews(filtered);
  }

  document.getElementById("filter-btn").addEventListener("click", filterReviews);

  // í˜ì´ì§€ ì§„ì… ì‹œ ì „ì²´ í›„ê¸° í‘œì‹œ
  renderReviews(reviews);
</script>

</body>
</html>
