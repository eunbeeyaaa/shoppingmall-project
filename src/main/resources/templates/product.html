<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>NOVA</title>
    <link rel="stylesheet" href="/css/style.css" />
    <style>
    .product-detail {
        max-width: 1200px;
        margin: 50px auto;
        padding: 30px;
        border: 1px solid #ddd;
        border-radius: 10px;
        display: flex;
        flex-wrap: wrap;
        gap: 40px;
        justify-content: center;
      }

      .product-detail img {
        width: 400px;
        max-width: 100%;
        border-radius: 8px;
        object-fit: cover;
      }

  .product-info {
    flex: 1;
    min-width: 300px;
    max-width: 600px;
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

    .product-info h1 {
      font-size: 28px;
      margin-bottom: 10px;
    }

      .product-info .price {
        font-size: 22px;
        color: black;
        font-weight: bold;
      }

      .product-info .desc {
        font-size: 16px;
        color: #555;
        line-height: 1.5;
      }

  .option-select label {
    font-weight: bold;
    display: block;
    margin: 10px 0 5px;
  }

  .option-select select {
    padding: 8px;
    width: 100%;
    border: 1px solid #ccc;
    border-radius: 5px;
  }

    .total,
    .cart-btn {
      margin-bottom: 10px;
      display: block;
    }

    .option-select select {
      padding: 5px;
      margin-left: 10px;
    }

  .quantity-control {
    display: flex;
    align-items: center;
    gap: 10px;
    margin: 10px 0;
  }

  .quantity-control button {
    width: 30px;
    height: 30px;
    font-size: 18px;
    background-color: #eee;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }

  .total {
    font-weight: bold;
    font-size: 18px;
    color: #333;
    margin: 10px 0;
  }

  .cart-btn {
    background-color: black;
    color: #fff;
    border: none;
    padding: 12px 20px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
  }

  .tabs {
      position: sticky;
      top: 0;
      z-index: 999;
      background: #fff;
      display: flex;
      justify-content: center;
      border-bottom: 1px solid #ddd;
      padding: 10px 0;
      margin-bottom: 20px;
    }

    .tabs a {
      padding: 10px 20px;
      text-decoration: none;
      color: #333;
      font-weight: bold;
    }

    .tabs a:hover {
      color: #d32f2f;
    }

    /* ê° ì„¹ì…˜ */
    .product-section {
      padding: 40px 10%;
      scroll-margin-top: 70px; /* íƒ­ ë†’ì´ë§Œí¼ */
      border-bottom: 1px solid #eee;
    }

    .product-section:last-of-type {
      border-bottom: none;
    }

    @media (max-width: 768px) {
    .product-detail {
      flex-direction: column;
      align-items: center;
    }

    .product-info {
      max-width: 100%;
    }


  </style>
</head>
<body>

<!-- í—¤ë” -->
<div th:replace="~{common/header :: header}"></div>

<!-- ìƒí’ˆ ìƒì„¸ ì¹´ë“œ -->
<div class="product-detail">
    <img id="product-image" src="" alt="ìƒí’ˆ ì´ë¯¸ì§€" />
    <div class="product-info">
        <h1 id="product-name">ìƒí’ˆëª…</h1>
        <div class="price" id="product-price">ê°€ê²©</div>
        <div class="desc">
            <p>ì´ ìƒí’ˆì€ ìŠ¤íƒ€ì¼ë¦¬ì‹œí•˜ê³  í¸ì•ˆí•œ ì°©ìš©ê°ì„ ì œê³µí•©ë‹ˆë‹¤. ë‹¤ì–‘í•œ ì½”ë””ì— ì˜ ì–´ìš¸ë ¤ ë°ì¼ë¦¬ ì•„ì´í…œìœ¼ë¡œ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.</p>
        </div>
        <div class="option-select">
            <label>ìƒ‰ìƒ:
                <select id="color">
                    <option value="">[í•„ìˆ˜] ì„ íƒ</option>
                    <option value="ë¸”ë™">ë¸”ë™</option>
                    <option value="í™”ì´íŠ¸">í™”ì´íŠ¸</option>
                </select>
            </label>
        </div>
        <div class="option-select">
            <label>ì‚¬ì´ì¦ˆ:
                <select id="size">
                    <option value="">[í•„ìˆ˜] ì„ íƒ</option>
                    <option value="M">M</option>
                    <option value="L">L</option>
                </select>
            </label>
        </div>

        <div class="quantity-control">
            <button id="minus">-</button>
            <span id="quantity">1</span>
            <button id="plus">+</button>
        </div>

        <div class="total">TOTAL: <span id="totalPrice">0ì›</span></div>
        <button id="addToCart" class="cart-btn">ì¥ë°”êµ¬ë‹ˆì— ë‹´ê¸°</button>
    </div>
</div>

<!-- íƒ­ -->
<div class="tabs">
    <a href="#info">ìƒí’ˆ ì •ë³´</a>
    <a href="#review">ìƒí’ˆ í›„ê¸°</a>
    <a href="#qna">ìƒí’ˆ ë¬¸ì˜</a>
    <a href="#delivery">ë°°ì†¡/êµí™˜/í™˜ë¶ˆ</a>
</div>

<!-- ì½˜í…ì¸  -->
<div id="info" class="product-section">
    <h2>ìƒí’ˆ ì •ë³´</h2>
    <p>ì—¬ê¸°ì— ìƒì„¸ ìƒí’ˆ ì •ë³´ê°€ ë“¤ì–´ê°‘ë‹ˆë‹¤.</p>
</div>
<div id="review" class="product-section">
    <h2>ìƒí’ˆ í›„ê¸°</h2>
    <p>í›„ê¸°ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
</div>
<div id="qna" class="product-section">
    <h2>ìƒí’ˆ ë¬¸ì˜</h2>
    <p>ë¬¸ì˜ ë‚´ìš©ì„ ì—¬ê¸°ì— ì‘ì„±í•˜ê±°ë‚˜ í‘œì‹œí•©ë‹ˆë‹¤.</p>
</div>
<div id="delivery" class="product-section">
    <h2>ë°°ì†¡/êµí™˜/í™˜ë¶ˆ ì•ˆë‚´</h2>
    <h4>DELIVERY</h4>
    <p>
        - ê²°ì œì¼ ì´í›„ 2~3ì¼ ì´ë‚´ ë°œì†¡í•©ë‹ˆë‹¤. (ì£¼ë§, ê³µíœ´ì¼ ì œì™¸) <br>
        - ì¼ë¶€ ë„ì„œ/ì‚°ê°„ ì§€ì—­ì—ëŠ” ë°°ì†¡ë¹„ ì¶”ê°€ ë° ë°°ì†¡ ì§€ì—°ì´ ë°œìƒ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    </p>
    <h4>EXCHANGE & REFUND</h4>
    <p>
        - êµ¬ë§¤ìì˜ ë¶€ì£¼ì˜ë¡œ ì¸í•œ ìƒí’ˆ íŒŒì†ì€ êµí™˜ ë° í™˜ë¶ˆ ë¶ˆê°€í•©ë‹ˆë‹¤.<br>
        - ë¼ë²¨ ì œê±° ì‹œ êµí™˜ ë° í™˜ë¶ˆ ë¶ˆê°€í•©ë‹ˆë‹¤. <br>
        - ë‹¨ìˆœ ë³€ì‹¬ìœ¼ë¡œ ì¸í•œ êµí™˜ ë° í™˜ë¶ˆì˜ ê²½ìš°, êµ¬ë§¤ìë‹˜ê»˜ì„œ ë°°ì†¡ë¹„ë¥¼ ë¶€ë‹´í•˜ì…”ì•¼í•©ë‹ˆë‹¤.<br>
        - ìƒí’ˆ ìˆ˜ë ¹ì¼ë¡œë¶€í„° 7ì¼ ì´ë‚´ë¡œë§Œ êµí™˜ ë° í™˜ë¶ˆ ê°€ëŠ¥í•©ë‹ˆë‹¤. <br>
        - ìƒí’ˆ ë¶ˆëŸ‰ ë° ì˜¤ë°°ì†¡ìœ¼ë¡œ ì¸í•œ êµí™˜ ë° í™˜ë¶ˆì€ ë°°ì†¡ë¹„ëŠ” ë³¸ì‚¬ì—ì„œ ë¶€ë‹´í•©ë‹ˆë‹¤. <br>
        - ë³¸ì‚¬ì˜ ìƒí’ˆì´ ì•„ë‹Œ ê²½ìš° êµí™˜ ë° í™˜ë¶ˆ ë¶ˆê°€í•©ë‹ˆë‹¤.
    </p>
</div>

<!-- í‘¸í„° -->
<div th:replace="~{common/footer :: footer}"></div>

<!-- JS -->
<script>
  const params = new URLSearchParams(window.location.search);
  const name = decodeURIComponent(params.get('name'));
  const priceStr = decodeURIComponent(params.get('price'));
  const price = parseInt(priceStr.replace(/[^0-9]/g, ""));
  const image = decodeURIComponent(params.get('image'));

  let quantity = 1;

  if (name && priceStr && image) {
    document.getElementById("product-name").innerText = name;
    document.getElementById("product-price").innerText = priceStr;
    document.getElementById("product-image").src = image;
    updateTotal();
  } else {
    document.querySelector(".product-detail").innerHTML = "<p>ìƒí’ˆ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>";
  }

  function updateTotal() {
    document.getElementById('quantity').innerText = quantity;
    document.getElementById('totalPrice').innerText = (quantity * price).toLocaleString() + 'ì›';
  }

  document.getElementById('plus').addEventListener('click', () => {
    quantity++;
    updateTotal();
  });

  document.getElementById('minus').addEventListener('click', () => {
    if (quantity > 1) quantity--;
    updateTotal();
  });

  document.getElementById('addToCart').addEventListener('click', () => {
    const selectedColor = document.getElementById('color').value;
    const selectedSize = document.getElementById('size').value;

    if (!selectedColor || !selectedSize) {
      alert("ìƒ‰ìƒê³¼ ì‚¬ì´ì¦ˆë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!");
      return;
    }

    const cartItem = {
      name,
      image,
      price,
      quantity,
      color: selectedColor,
      size: selectedSize,
      totalPrice: quantity * price
    };

    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    cart.push(cartItem);
    localStorage.setItem('cart', JSON.stringify(cart));

    alert("ì¥ë°”êµ¬ë‹ˆì— ë‹´ê²¼ì–´ìš”! ğŸ›’");
  });

  document.querySelectorAll('.tabs a').forEach(link => {
    link.addEventListener('click', function (e) {
      e.preventDefault();
      const targetId = this.getAttribute('href');
      document.querySelector(targetId).scrollIntoView({ behavior: 'smooth' });
    });
  });
</script>

</body>
</html>
